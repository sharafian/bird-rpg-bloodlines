{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"Phaser\"","webpack:///./src/GameScene.ts","webpack:///./node_modules/events/events.js","webpack:///./src/index.ts","webpack:///./src/entities/Npc.ts","webpack:///./src/entities/Player.ts","webpack:///./src/entities/GroundPredator.ts","webpack:///./src/AboutMenu.ts","webpack:///./src/MainMenu.ts","webpack:///./src/MateScene.ts","webpack:///./src/components/RouletteSlider.ts","webpack:///./src/entities/Egg.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Phaser","BIRD_SIZE","MATING_RANGE","TILE_SIZE","player","Player","NPCs","Npc","predators","GroundPredator","entities","preload","this","load","tilemapCSV","image","forEach","ent","onFade","_","progress","scene","start","createEnvironment","on","mate","closestBirb","startLovin","setTimeout","cameras","main","fadeOut","map","make","tilemap","tileWidth","tileHeight","groundTileset","addTilesetImage","layer","createStaticLayer","setCollision","physics","add","collider","getSprite","startFollow","setBounds","widthInPixels","heightInPixels","setBackgroundColor","update","Error","closest","reduce","npc","closestDistance","Math","Distance","BetweenPoints","getPosition","undefined","getPlayer","Scene","GameScene","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","events","existing","warning","newListener","emit","unshift","push","length","warned","w","String","emitter","count","console","warn","onceWrapper","fired","removeListener","wrapFn","arguments","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","context","handler","len","listeners","addListener","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","config","AUTO","pixelArt","scale","Scale","NONE","autoCenter","CENTER_BOTH","width","height","zoom","max","default","arcade","gravity","y","debug","MainMenu","AboutMenu","MateScene","game","Game","x","asset","facing","lovin","spritesheet","frameWidth","frameHeight","sprite","anims","frameRate","frames","generateFrameNumbers","end","play","setDebug","hearticles","particles","heartEmitter","createEmitter","lifespan","speed","min","angle","radial","gravityY","frequency","quantity","setPosition","log","stopLovin","stop","setVelocityX","rand","random","setFlipX","die","flapping","singing","frame","repeat","cursors","input","keyboard","createCursorKeys","singButton","addKey","vy","body","velocity","vx","stopped","setEmitterAngle","up","down","left","right","isDown","isPlaying","setVelocityY","isFlying","anim","getAnim","currentAnim","size","prey","isClose","prowl","attack","distance","selfLocation","playerLocation","runLeft","runRight","jump","setVelocity","preyPosition","predatorPosition","abs","blocked","kill","menuY","text","color","fontSize","enterKey","selection","menuRowHeight","menuItems","title","itemStyle","item","selectangle","rectangle","updateSelect","setY","egg","Egg","sliders","RouletteSlider","components","setText","hatch","lowerBound","upperBound","positionToX","addMark","getBody","startingPos","rect","setAllowGravity","setScale"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = Phaser;","import Phaser from 'phaser'\n\nimport { Npc } from './entities/Npc'\nimport { Player } from './entities/Player'\nimport { GroundPredator } from './entities/GroundPredator'\nimport { PhysicsEntity } from './types/Entity'\n\nexport const BIRD_SIZE = 50\nexport const MATING_RANGE = 150\n\nexport const TILE_SIZE = 32\n\nexport class GameScene extends Phaser.Scene {\n  private player = new Player(this, 20, 20)\n  private NPCs = [\n    new Npc(this, 445, 425, 'assets/bluebird.png'),\n    new Npc(this, 1200, 50, 'assets/redbird.png')\n  ]\n\n  private predators = [\n    new GroundPredator(this, 1400, 700, 'assets/cat.png', 64)\n  ]\n\n  private entities: PhysicsEntity[] = [ ...this.NPCs, ...this.predators, this.player ]\n\n  constructor () {\n    super('game-scene')\n  }\n\n  preload () {\n    this.load.tilemapCSV('environment_map', 'assets/environment2.csv')\n    this.load.image('environment_tiles', 'assets/environment2.png')\n\n    this.entities.forEach((ent) => ent.preload())\n  }\n\n  onFade (_: Phaser.Cameras.Scene2D.Camera, progress: number) {\n    if (progress === 1) {\n      this.scene.start('mating-scene')\n    }\n  }\n\n  create () {\n    this.entities.forEach((ent) => ent.create())\n    // todo: get this.physics.add.overlap(player, predators) working\n\n    this.createEnvironment()\n\n    this.player.on('start_singing', () => {\n      const mate = this.closestBirb()\n\n      if (mate) {\n        this.player.startLovin()\n        mate.startLovin()\n\n        setTimeout(() => {\n          this.cameras.main.fadeOut(3000, 0, 0, 0, this.onFade.bind(this))\n        }, 1000)\n      }\n    })\n  }\n\n  createEnvironment () {\n    const map = this.make.tilemap({ key: 'environment_map', tileWidth: TILE_SIZE, tileHeight: TILE_SIZE })\n    const groundTileset = map.addTilesetImage('environment_tiles')\n    const layer = map.createStaticLayer(0, groundTileset, 0, 0)\n\n    layer.setCollision([2, 8, 16, 22, 24, 44, 48])\n    this.entities.forEach(ent => {\n      this.physics.add.collider(ent.getSprite(), layer)\n    })\n\n    this.cameras.main.startFollow(this.player.getSprite(), true, 0.1, 0.1)\n    this.cameras.main.setBounds(0, 0, map.widthInPixels, map.heightInPixels)\n    this.cameras.main.setBackgroundColor('#a6dbed')\n  }\n\n  update () {\n    this.entities.forEach((ent) => ent.update())\n  }\n\n  public closestBirb (): Npc | void {\n    if (!this.player) {\n      throw new Error('player does not exist')\n    }\n\n    const closest = this.NPCs.reduce((closest, npc) => {\n      if (!this.player) {\n        throw new Error('player does not exist')\n      }\n\n      const closestDistance = Phaser.Math.Distance\n        .BetweenPoints(this.player.getPosition(), closest.getPosition())\n\n      const npcDistance = Phaser.Math.Distance\n        .BetweenPoints(this.player.getPosition(), npc.getPosition())\n\n      return (npcDistance < closestDistance) ? npc : closest\n    })\n\n    const distance = Phaser.Math.Distance\n      .BetweenPoints(this.player.getPosition(), closest.getPosition())\n\n    return distance > MATING_RANGE\n      ? undefined\n      : closest\n  }\n\n  getPlayer () {\n    return this.player\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","import Phaser from 'phaser'\n\nimport { GameScene } from './GameScene'\nimport { AboutMenu } from './AboutMenu'\nimport { MainMenu } from './MainMenu'\nimport { MateScene } from './MateScene'\n\nconst ZOOM = 1\n\nconst config = {\n  type: Phaser.AUTO,\n  pixelArt: true,\n\n  scale: {\n    mode: Phaser.Scale.NONE,\n    autoCenter: Phaser.Scale.CENTER_BOTH,\n    width: 640,\n    height: 480,\n    zoom: ZOOM,\n    max: {\n      width: 640,\n      height: 480\n    }\n  },\n  physics: {\n    default: 'arcade',\n    arcade: {\n      gravity: { y: 500 },\n      debug: false\n    }\n  },\n  scene: [ MainMenu, GameScene, AboutMenu, MateScene ]\n}\n\nconst game = new Phaser.Game(config)\nexport default game\n","import { GameScene, BIRD_SIZE } from '../GameScene'\n\nexport class Npc {\n  private scene: GameScene\n  private x: number\n  private y: number\n  private asset: string\n  private sprite?: Phaser.Physics.Arcade.Sprite\n  private heartEmitter?: Phaser.GameObjects.Particles.ParticleEmitter\n\n  private facing = -1\n  private lovin = false\n\n  constructor (scene: GameScene, x: number, y: number, asset: string) {\n    this.scene = scene\n    this.x = x\n    this.y = y\n    this.asset = asset\n  }\n\n  preload () {\n    // TODO: will this load the heart several times?\n    this.scene.load.image('heart', 'assets/particles/heart.png')\n    this.scene.load.spritesheet(`${this.asset}-npc`, this.asset, {\n      frameWidth: BIRD_SIZE,\n      frameHeight: BIRD_SIZE\n    })\n  }\n\n  create () {\n    this.sprite = this.scene.physics.add.sprite(this.x, this.y, `${this.asset}-npc`)\n    this.scene.anims.create({\n      key: `${this.asset}-stand`,\n      frameRate: 0,\n      frames: this.scene.anims.generateFrameNumbers(`${this.asset}-npc`, {\n        start: 3,\n        end: 3\n      })\n    })\n    this.sprite.anims.play(`${this.asset}-stand`)\n    // this.sprite.setCollideWorldBounds(true)\n    this.sprite.setDebug(true, true, 0x00ff00)\n\n    const hearticles = this.scene.add.particles('heart')\n    this.heartEmitter = hearticles.createEmitter({\n      lifespan: 1000,\n      speed: { min: 25, max: 50 },\n      angle: { min: 250, max: 290 },\n      radial: true,\n      gravityY: -50,\n      frequency: 250,\n      quantity: 1\n    })\n  }\n\n  startLovin () {\n    this.lovin = true\n    if (!this.heartEmitter || !this.sprite) {\n      console.log('no emitter')\n      return\n    }\n\n    this.heartEmitter.start()\n    this.heartEmitter.setPosition(\n      this.sprite.x + BIRD_SIZE + this.facing * BIRD_SIZE / 2,\n      this.sprite.y + BIRD_SIZE / 2)\n  }\n\n  stopLovin () {\n    this.lovin = false\n    this.heartEmitter?.stop()\n  }\n\n  update () {\n    if (!this.sprite) {\n      return\n    }\n\n    // Don't move while you're gettin it on\n    if (this.lovin) {\n      this.sprite.setVelocityX(0)\n      return\n    }\n\n    const rand = Math.random()\n    // small chance to change direction\n    // medium chance to move in facing direction\n    // large chance to do nothing\n    if (rand > 0 && rand <= 0.02) {\n      this.facing = this.facing < 0 ? 1 : -1\n    } else if (rand > 0.05 && rand <= 0.2) {\n      this.sprite.setVelocityX(this.facing * 2 * BIRD_SIZE)\n    } else {\n      this.sprite.setVelocityX(0)\n    }\n\n    this.sprite.setFlipX(this.facing > 0)\n  }\n\n  getPosition (): Phaser.Types.Math.Vector2Like {\n    if (!this.sprite) {\n      throw new Error('sprite does not exist')\n    }\n\n    return {\n      x: this.sprite.x,\n      y: this.sprite.y\n    }\n  }\n\n  getSprite (): Phaser.Physics.Arcade.Sprite {\n    if (!this.sprite) {\n      throw new Error('sprite does not exist')\n    }\n\n    return this.sprite\n  }\n\n  die () {\n    console.log(\"npc died\")\n    // unimplemented\n  }\n}\n","import Phaser from 'phaser'\nimport { BIRD_SIZE } from '../GameScene'\nimport { EventEmitter } from 'events'\n\nexport class Player extends EventEmitter {\n  private sprite?: Phaser.Physics.Arcade.Sprite\n  private cursors?: Phaser.Types.Input.Keyboard.CursorKeys\n\n  private flapping = false\n  private singing = false\n  private lovin = false\n  private facing = 1\n\n  constructor (\n    private scene: Phaser.Scene,\n    private x: number,\n    private y: number\n  ) {\n    super()\n  }\n\n  preload () {\n    this.scene.load.spritesheet('notes', 'assets/particles/notes.png', {\n      frameWidth: 12,\n      frameHeight: 12\n    })\n\n    this.scene.load.spritesheet('birb', 'assets/birb4.png', {\n      frameWidth: BIRD_SIZE,\n      frameHeight: BIRD_SIZE\n    })\n  }\n\n  create () {\n    this.flapping = false\n    this.singing = false\n    this.lovin = false\n    this.facing = 1\n\n    const noteParticles = this.scene.add.particles('notes')\n    const emitter = noteParticles.createEmitter({\n      frame: [ 0, 1, 2, 3, 4, 5, 6, 7 ],\n      x: 40,\n      y: 0,\n      lifespan: 800,\n      speed: { min: 100, max: 200 },\n      angle: { min: 300, max: 360 },\n      radial: true,\n      gravityY: 0,\n      quantity: 2,\n      frequency: 150\n    })\n\n    emitter.stop()\n\n    this.sprite = this.scene.physics.add.sprite(this.x, this.y, 'birb')\n    // this.sprite.setCollideWorldBounds(true)\n\n    this.scene.anims.create({\n      key: 'stand',\n      frameRate: 0,\n      frames: this.scene.anims.generateFrameNumbers('birb', {\n        start: 3,\n        end: 2\n      })\n    })\n\n    this.scene.anims.create({\n      key: 'walk',\n      frameRate: 10,\n      repeat: -1,\n      frames: this.scene.anims.generateFrameNumbers('birb', {\n        start: 3,\n        end: 5\n      })\n    })\n\n    this.scene.anims.create({\n      key: 'fly',\n      frameRate: 10,\n      frames: this.scene.anims.generateFrameNumbers('birb', {\n        start: 0,\n        end: 2\n      })\n    })\n\n    this.cursors = this.scene.input.keyboard.createCursorKeys()\n    const singButton = this.scene.input.keyboard.addKey('Z')\n\n    singButton.on('down', () => {\n      if (this.lovin) {\n        return\n      }\n\n      const vy = this.sprite?.body.velocity.y\n      const vx = this.sprite?.body.velocity.x\n      const stopped = vy === 0 && vx === 0\n\n      if (this.sprite && stopped) {\n        this.singing = true\n\n        emitter.setEmitterAngle({\n          min: (this.facing < 0 ? 180 : 300),\n          max: (this.facing < 0 ? 240 : 360)\n        })\n\n        emitter.setPosition(\n          this.sprite.x + 20 * this.facing,\n          this.sprite.y - 10\n        )\n\n        this.emit('start_singing')\n        emitter.start()\n      }\n    })\n\n    singButton.on('up', () => {\n      if (this.lovin) {\n        return\n      }\n\n      this.emit('stop_singing')\n      this.singing = false\n      emitter.stop()\n    })\n\n    this.scene.events.on('shutdown', () => {\n      singButton.removeAllListeners()\n      this.cursors?.up?.removeAllListeners()\n      this.cursors?.down?.removeAllListeners()\n      this.cursors?.left?.removeAllListeners()\n      this.cursors?.right?.removeAllListeners()\n    })\n  }\n\n  startLovin () {\n    this.lovin = true\n  }\n\n  stopLovin () {\n    this.lovin = false\n  }\n\n  update () {\n    if (!this.cursors || !this.sprite) {\n      return\n    }\n\n    if (this.singing) {\n      this.sprite.setVelocityX(0)\n      return\n    }\n\n    if (this.cursors.up?.isDown) {\n      if (!this.flapping) {\n        if (!this.sprite.anims.isPlaying) {\n          this.sprite.anims.play('fly')\n        }\n\n        this.sprite.setVelocityY(-5 * BIRD_SIZE)\n      }\n\n      this.flapping = true\n    } else {\n      this.flapping = false\n    }\n\n    if (this.cursors.left?.isDown) {\n      this.facing = -1\n      this.sprite.setVelocityX(-2 * BIRD_SIZE)\n    } else if (this.cursors.right?.isDown) {\n      this.facing = 1\n      this.sprite.setVelocityX(2 * BIRD_SIZE)\n    } else {\n      this.sprite.setVelocityX(0)\n    }\n\n    if (this.isFlying()) {\n      this.sprite.setVelocityX(4 * this.facing * BIRD_SIZE)\n    }\n\n    this.sprite.setFlipX(this.facing > 0)\n    const anim = this.getAnim()\n    if (this.sprite.anims.currentAnim?.key !== anim) {\n      this.sprite.anims.play(anim)\n    }\n  }\n\n  private isFlying (): boolean {\n    if (!this.sprite) throw new Error('no player')\n    return !!this.sprite.body.velocity.y\n  }\n\n  private getAnim (): string {\n    if (!this.sprite) return 'stand'\n\n    if (this.isFlying()) return 'fly'\n    if (this.sprite.body.velocity.x) return 'walk'\n\n    return 'stand'\n  }\n\n  getPosition () {\n    if (!this.sprite) throw new Error('no player')\n    return this.sprite\n  }\n\n  die () {\n    console.log(\"player died\")\n    // unimplemented\n  }\n\n  getSprite () {\n    if (!this.sprite) {\n      throw new Error('Player object has no sprite.')\n    } else {\n      return this.sprite\n    }\n  }\n}\n","import { GameScene } from '../GameScene'\nimport { Player } from './Player'\nimport { Entity } from '../types/Entity'\nimport { Npc } from './Npc'\n\nconst CHASE_DISTANCE = 250\nconst CHASE_SPEED = 240\nconst JUMP_POWER = 400\n\nexport class GroundPredator {\n  private scene: GameScene\n  private x: number\n  private y: number\n  private asset: string\n  private sprite?: Phaser.Physics.Arcade.Sprite\n  private size: number\n\n  private facing = -1\n\n  constructor (\n    scene: GameScene,\n    x: number,\n    y: number,\n    asset: string,\n    size: number\n  ) {\n    this.scene = scene\n    this.x = x\n    this.y = y\n    this.asset = asset\n    this.size = size\n  }\n\n  preload () {\n    this.scene.load.spritesheet(`${this.asset}-ground-predator`, this.asset, {\n      frameWidth: this.size,\n      frameHeight: this.size\n    })\n  }\n\n  create () {\n    this.sprite = this.scene.physics.add.sprite(\n      this.x,\n      this.y,\n      `${this.asset}-ground-predator`\n    )\n    this.scene.anims.create({\n      key: `${this.asset}-stand`,\n      frameRate: 0,\n      frames: this.scene.anims.generateFrameNumbers(\n        `${this.asset}-ground-predator`,\n        {\n          start: 3,\n          end: 3\n        }\n      )\n    })\n    this.sprite.anims.play(`${this.asset}-stand`)\n    // this.sprite.setCollideWorldBounds(true)\n    this.sprite.setDebug(true, true, 0x00ff00)\n\n    // todo: get overlap working\n    // const playerSprite = this.scene.getPlayer().getSprite()\n    // this.scene.physics.add.overlap(\n    //   playerSprite,\n    //   this.getSprite(),\n    //   this.kill,\n    //   null,\n    //   this\n    // )\n  }\n\n  update () {\n    const prey = this.scene.getPlayer()\n\n    if (this.isClose(prey, CHASE_DISTANCE)) {\n      this.prowl()\n    } else {\n      this.attack(prey)\n    }\n  }\n\n  isClose (prey: Npc | Player, distance: number) {\n    const selfLocation = this.getPosition()\n    const playerLocation = prey.getPosition()\n    if (\n      Phaser.Math.Distance.BetweenPoints(selfLocation, playerLocation) >\n      distance\n    ) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  prowl () {\n    // wander around\n    const rand = Math.random()\n    // small chance to change direction\n    // medium chance to move in facing direction\n    // large chance to do nothing\n    if (rand > 0 && rand <= 0.02) {\n      this.facing = this.facing < 0 ? 1 : -1\n    } else if (rand > 0.05 && rand <= 0.2) {\n      this.sprite!.setVelocityX(this.facing * 2 * this.size)\n    } else {\n      this.sprite!.setVelocityX(0)\n    }\n\n    this.sprite!.setFlipX(this.facing > 0)\n  }\n\n  runLeft () {\n    this.sprite!.setVelocityX(-CHASE_SPEED)\n  }\n\n  runRight () {\n    this.sprite!.setVelocityX(CHASE_SPEED)\n  }\n\n  jump () {\n    this.sprite!.setVelocityY(-JUMP_POWER)\n  }\n\n  stop () {\n    this.sprite!.setVelocity(0)\n  }\n\n  attack (prey: Npc | Player) {\n    const preyPosition = prey.getPosition()\n    const predatorPosition = this.getPosition()\n    //   move in the x direction of prey and jump when reached\n    // if bird is above\n    if (\n      Math.abs(preyPosition.x! - predatorPosition.x!) < 10 &&\n      predatorPosition.y! > preyPosition.y! + 100 &&\n      this.sprite!.body.blocked.down // if the ground is changed to an image change blocked to touching\n    ) {\n      // && this.sprite.body.touching.down\n      this.jump()\n      return\n    } \n    \n    if (preyPosition.x! > predatorPosition.x!) {\n      this.runRight()\n      return\n    } \n    \n    if (preyPosition.x! < predatorPosition.x!) {\n      this.runLeft()\n      return\n    }\n  }\n\n  kill (prey: Npc | Player) {\n    prey.die()\n  }\n\n  getPosition (): Phaser.Types.Math.Vector2Like {\n    if (!this.sprite) {\n      throw new Error('sprite does not exist')\n    }\n\n    return {\n      x: this.sprite.x,\n      y: this.sprite.y\n    }\n  }\n\n  getSprite (): Phaser.Physics.Arcade.Sprite {\n    if (!this.sprite) {\n      throw new Error('sprite does not exist')\n    }\n\n    return this.sprite\n  }\n}\n","import Phaser from 'phaser'\n\nconst AboutText = `\nHere is some text about the game and how\nto play it.\n\nUse the arrow keys to move, and hit up to\nfly. You need to find your mate to keep\nyour bloodline alive\n\nHit ENTER to return to the main menu`\n\nexport class AboutMenu extends Phaser.Scene {\n  private menuY = 150\n\n  constructor () {\n    super('about-menu')\n  }\n\n  create () {\n    const headerStyle = {\n      color: 'white',\n      fontSize: '36px'\n    }\n\n    const itemStyle = {\n      color: 'white',\n      fontSize: '16px'\n    }\n\n    this.add.text(100, 100, 'About', headerStyle)\n    this.add.text(100, this.menuY, AboutText, itemStyle)\n\n    const enterKey = this.input.keyboard.addKey('ENTER')\n\n    enterKey.on('up', () => {\n      this.scene.start('main-menu')\n    })\n\n    this.events.on('shutdown', () => {\n      enterKey.removeAllListeners()\n    })\n  }\n}\n","import Phaser from 'phaser'\n\nexport class MainMenu extends Phaser.Scene {\n  private selection = 0\n\n  private menuY = 250\n  private menuRowHeight = 30\n  private menuItems = [\n    { title: 'Start Campaign', scene: 'game-scene' },\n    { title: 'About', scene: 'about-menu' }\n  ]\n\n  constructor () {\n    super('main-menu')\n  }\n\n  create () {\n    const headerStyle = {\n      color: 'white',\n      fontSize: '36px'\n    }\n\n    const itemStyle = {\n      color: 'white',\n      fontSize: '24px'\n    }\n\n    this.add.text(100, 100, 'Bird RPG: Bloodlines', headerStyle)\n\n    for (let i = 0; i < this.menuItems.length; ++i) {\n      const item = this.menuItems[i]\n      this.add.text(100, this.menuY + i * this.menuRowHeight, item.title, itemStyle)\n    }\n\n    const cursors = this.input.keyboard.createCursorKeys()\n    const selectangle = this.add.rectangle(\n      250,\n      this.menuY + this.selection * this.menuRowHeight + 15,\n      300,\n      27,\n      0xffffff,\n      0.5\n    )\n\n    const updateSelect = () => {\n      selectangle.setY(this.menuY + this.selection * this.menuRowHeight + 15)\n    }\n\n    cursors.up?.on('down', () => {\n      this.selection = Math.max(this.selection - 1, 0)\n      updateSelect()\n    })\n\n    cursors.down?.on('down', () => {\n      this.selection = Math.min(this.selection + 1, 1)\n      updateSelect()\n    })\n\n    const enterKey = this.input.keyboard.addKey('ENTER')\n\n    enterKey.on('up', () => {\n      this.scene.start(this.menuItems[this.selection].scene)\n    })\n\n    this.events.on('shutdown', () => {\n      enterKey.removeAllListeners()\n      cursors.up?.removeAllListeners()\n      cursors.down?.removeAllListeners()\n      cursors.left?.removeAllListeners()\n      cursors.right?.removeAllListeners()\n    })\n  }\n}\n","import Phaser from 'phaser'\n\nimport { RouletteSlider } from './components/RouletteSlider'\nimport { Egg } from './entities/Egg'\nimport { Entity } from './types/Entity'\n\nexport class MateScene extends Phaser.Scene {\n  private egg = new Egg(this, 320, 130)\n  private sliders = [\n    new RouletteSlider(this, 320, 220, 0.3, 0.4),\n    new RouletteSlider(this, 320, 250, 0.5, 0.9)\n  ]\n\n  private components: Entity[] = [\n    ...this.sliders,\n    this.egg\n  ]\n\n  constructor () {\n    super('mating-scene')\n  }\n\n  preload () {\n    this.components.forEach(c => c.preload())\n  }\n\n  onFade (_: Phaser.Cameras.Scene2D.Camera, progress: number) {\n    if (progress === 1) {\n      this.scene.start('game-scene')\n    }\n  }\n\n  create () {\n    this.components.forEach(c => c.create())\n\n    const text = this.add.text(175, 300, 'Hit ENTER to select attributes', {\n      color: 'white'\n    })\n\n    const key = this.input.keyboard.addKey('ENTER')\n    key.once('up', () => {\n      this.sliders.forEach(s => s.stop())\n      text.setText('')\n\n      this.egg.hatch()\n      this.egg.once('hatched', () => {\n        this.cameras.main.fadeOut(2000, 0, 0, 0, this.onFade.bind(this))\n      })\n    })\n\n    this.events.on('shutdown', () => {\n      key.removeAllListeners()\n    })\n  }\n\n  update () {\n    this.components.forEach(c => c.update())\n  }\n}\n","import Phaser from 'phaser'\n\nexport class RouletteSlider {\n  private selectangle?: Phaser.GameObjects.GameObject\n  private width = 300\n  private height = 25\n  private speed = 200\n  private stopped = false\n\n  constructor (\n    private scene: Phaser.Scene,\n    private x: number,\n    private y: number,\n    private lowerBound: number,\n    private upperBound: number\n  ) {}\n\n  preload () {\n    return\n  }\n\n  private positionToX (position: number) {\n    return this.x - (this.width / 2) + this.width * position\n  }\n\n  private addMark (position: number, color: number): Phaser.GameObjects.Rectangle {\n    return this.scene.add.rectangle(\n      this.positionToX(position),\n      this.y,\n      6,\n      this.height,\n      color\n    )\n  }\n\n  getBody () {\n    if (!this.selectangle) {\n      throw new Error('no selection')\n    }\n\n    return this.selectangle.body as Phaser.Physics.Arcade.Body\n  }\n\n  create () {\n    this.stopped = false\n    this.scene.add.rectangle(this.x, this.y, this.width, this.height, 0xffffff)\n\n    const startingPos = this.lowerBound + Math.random() * (this.upperBound - this.lowerBound)\n    const rect = this.addMark(startingPos, 0x00ff00)\n    this.selectangle = this.scene.physics.add.existing(rect, false)\n    this.getBody().setAllowGravity(false)\n    this.getBody().setVelocityX((Math.random() < 0.5) ? -this.speed : this.speed)\n\n    this.addMark(this.lowerBound, 0xff44444)\n    this.addMark(this.upperBound, 0x44444ff)\n  }\n\n  update () {\n    if (!this.selectangle) {\n      return\n    } else if (this.stopped) {\n      this.getBody().setVelocityX(0)\n    } else if (this.getBody().x <= this.positionToX(this.lowerBound)) {\n      this.getBody().setVelocityX(this.speed)\n    } else if (this.getBody().x >= this.positionToX(this.upperBound)) {\n      this.getBody().setVelocityX(-this.speed)\n    }\n  }\n\n  getPosition () {\n    return { x: this.x, y: this.y }\n  }\n\n  stop () {\n    this.stopped = true\n  }\n}\n","import Phaser from 'phaser'\nimport { EventEmitter } from 'events'\n\nexport class Egg extends EventEmitter {\n  private sprite?: Phaser.GameObjects.Sprite\n\n  constructor (\n    private scene: Phaser.Scene,\n    private x: number,\n    private y: number\n  ) {\n    super()\n  }\n\n  preload () {\n    this.scene.load.spritesheet('hatch', 'assets/hatch.png', {\n      frameWidth: 16,\n      frameHeight: 16\n    })\n  }\n\n  create () {\n    this.scene.anims.create({\n      key: 'hatch',\n      frameRate: 10,\n      frames: this.scene.anims.generateFrameNumbers('hatch', {\n        start: 0,\n        end: 16\n      })\n    })\n\n    this.sprite = this.scene.add.sprite(this.x, this.y, 'hatch')\n    this.sprite.setScale(4, 4)\n  }\n\n  update () {\n    return\n  }\n\n  hatch () {\n    this.sprite?.anims.play('hatch')\n    this.sprite?.on('animationcomplete', () => {\n      this.emit('hatched')\n    })\n  }\n\n  getPosition () {\n    if (!this.sprite) {\n      throw new Error('no sprite')\n    }\n\n    return this.sprite\n  }\n}\n"],"sourceRoot":""}